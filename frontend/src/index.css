@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 140 15% 96%;
    --foreground: 150 30% 12%;

    --card: 0 0% 100%;
    --card-foreground: 150 30% 12%;

    --popover: 0 0% 100%;
    --popover-foreground: 150 30% 12%;

    --primary: 152 45% 28%;
    --primary-foreground: 0 0% 100%;

    --secondary: 140 15% 92%;
    --secondary-foreground: 150 30% 20%;

    --muted: 140 12% 90%;
    --muted-foreground: 150 15% 40%;

    --accent: 45 90% 50%;
    --accent-foreground: 45 90% 10%;

    --destructive: 0 75% 55%;
    --destructive-foreground: 0 0% 100%;

    --success: 152 60% 35%;
    --success-foreground: 0 0% 100%;

    --warning: 45 90% 50%;
    --warning-foreground: 45 90% 10%;

    --info: 190 70% 45%;
    --info-foreground: 0 0% 100%;

    --border: 140 15% 85%;
    --input: 140 15% 85%;
    --ring: 152 55% 28%;

    --radius: 0.75rem;

    --sidebar-background: 152 35% 15%;
    --sidebar-foreground: 140 15% 85%;
    --sidebar-primary: 45 90% 50%;
    --sidebar-primary-foreground: 45 90% 10%;
    --sidebar-accent: 152 30% 20%;
    --sidebar-accent-foreground: 140 15% 90%;
    --sidebar-border: 152 25% 25%;
    --sidebar-ring: 45 90% 50%;

    /* Custom gradients */
    --gradient-primary: linear-gradient(135deg, hsl(152, 45%, 28%) 0%, hsl(162, 40%, 32%) 100%);
    --gradient-accent: linear-gradient(135deg, hsl(45, 90%, 50%) 0%, hsl(40, 85%, 45%) 100%);
    --gradient-success: linear-gradient(135deg, hsl(152, 50%, 35%) 0%, hsl(162, 45%, 40%) 100%);
    --gradient-glass: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.7) 100%);
    --gradient-sidebar: linear-gradient(180deg, hsl(152, 35%, 15%) 0%, hsl(152, 40%, 10%) 100%);

    /* Shadows */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.05);
    --shadow-glow: 0 0 40px rgba(34, 139, 89, 0.15);
    --shadow-accent: 0 10px 30px -10px hsla(45, 90%, 50%, 0.3);
  }

  .dark {
    --background: 152 30% 8%;
    --foreground: 140 15% 95%;

    --card: 152 28% 12%;
    --card-foreground: 140 15% 95%;

    --popover: 152 28% 12%;
    --popover-foreground: 140 15% 95%;

    --primary: 152 50% 45%;
    --primary-foreground: 0 0% 100%;

    --secondary: 152 25% 18%;
    --secondary-foreground: 140 15% 85%;

    --muted: 152 25% 16%;
    --muted-foreground: 140 15% 55%;

    --accent: 45 90% 55%;
    --accent-foreground: 45 90% 10%;

    --destructive: 0 70% 50%;
    --destructive-foreground: 0 0% 100%;

    --success: 152 55% 42%;
    --success-foreground: 0 0% 100%;

    --border: 152 25% 20%;
    --input: 152 25% 20%;
    --ring: 152 50% 45%;

    --sidebar-background: 152 35% 6%;
    --sidebar-foreground: 140 15% 85%;
    --sidebar-accent: 152 30% 12%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-sans antialiased;
    font-family: 'Plus Jakarta Sans', system-ui, sans-serif;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-semibold tracking-tight;
  }
}

@layer components {
  .glass-card {
    @apply bg-card/80 backdrop-blur-xl border border-border/50 shadow-lg;
  }

  .glass-sidebar {
    background: var(--gradient-sidebar);
    @apply backdrop-blur-xl;
  }

  .gradient-primary {
    background: var(--gradient-primary);
  }

  .gradient-accent {
    background: var(--gradient-accent);
  }

  .gradient-success {
    background: var(--gradient-success);
  }

  .status-chip {
    @apply inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium transition-all duration-300;
  }

  .status-interested {
    @apply bg-success/15 text-success ring-1 ring-success/30;
    animation: pulse-glow-green 2s ease-in-out infinite;
  }

  .status-pending {
    @apply bg-warning/15 text-warning ring-1 ring-warning/30;
    animation: pulse-glow-amber 2s ease-in-out infinite;
  }

  .status-not-interested {
    @apply bg-destructive/15 text-destructive ring-1 ring-destructive/30;
  }

  .status-reminder {
    @apply bg-info/15 text-info ring-1 ring-info/30;
    animation: pulse-glow-blue 2s ease-in-out infinite;
  }

  .nav-link {
    @apply flex items-center gap-3 px-4 py-3 rounded-xl text-sidebar-foreground/70 transition-all duration-200 hover:bg-sidebar-accent hover:text-sidebar-foreground;
  }

  .nav-link-active {
    @apply bg-sidebar-accent text-sidebar-foreground shadow-md;
  }

  .stat-card {
    @apply glass-card rounded-2xl p-6 transition-all duration-300 hover:shadow-xl hover:-translate-y-1;
  }

  .table-row-hover {
    @apply transition-all duration-200 hover:bg-muted/50;
  }

  .input-field {
    @apply bg-background border-border focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all duration-200;
  }

  .btn-primary {
    @apply bg-primary text-primary-foreground hover:opacity-90 shadow-md hover:shadow-lg transition-all duration-200;
  }

  .btn-accent {
    background: var(--gradient-accent);
    @apply text-white shadow-accent hover:opacity-90 transition-all duration-200;
  }
}

@layer utilities {
  .animate-fade-in {
    animation: fade-in 0.4s ease-out;
  }

  .animate-slide-up {
    animation: slide-up 0.4s ease-out;
  }

  .animate-slide-in-left {
    animation: slide-in-left 0.3s ease-out;
  }

  .animate-scale-in {
    animation: scale-in 0.3s ease-out;
  }

  .animate-float {
    animation: float 6s ease-in-out infinite;
  }

  .skeleton-loading {
    @apply bg-muted animate-pulse rounded;
  }
}

@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slide-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slide-in-left {
  from {
    opacity: 0;
    transform: translateX(-20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

@keyframes pulse-glow-green {
  0%, 100% {
    box-shadow: 0 0 5px hsla(152, 60%, 35%, 0.3);
  }
  50% {
    box-shadow: 0 0 15px hsla(152, 60%, 35%, 0.5);
  }
}

@keyframes pulse-glow-amber {
  0%, 100% {
    box-shadow: 0 0 5px hsla(25, 70%, 45%, 0.3);
  }
  50% {
    box-shadow: 0 0 15px hsla(25, 70%, 45%, 0.5);
  }
}

@keyframes pulse-glow-blue {
  0%, 100% {
    box-shadow: 0 0 5px hsla(190, 70%, 45%, 0.3);
  }
  50% {
    box-shadow: 0 0 15px hsla(190, 70%, 45%, 0.5);
  }
}

/* Force recalculation helper */
.force-recalc * {
  transform: translateZ(0);
}

/* Dynamic color override helpers - ensure these have high specificity */
#dynamic-color-overrides,
#preview-color-overrides {
  /* Ensure dynamic styles have high priority */
}

/* Ensure Tailwind classes can be overridden by dynamic styles */
.bg-primary,
.text-primary,
.border-primary,
.bg-accent,
.text-accent,
.border-accent,
.bg-sidebar,
.text-sidebar,
.btn-primary,
.btn-accent,
.nav-link,
.nav-link-active,
.glass-sidebar,
.gradient-primary,
.gradient-accent {
  /* Allow dynamic overrides */
  transition: all 0.3s ease;
}

/* Customer deletion animations */
@keyframes delete-row {
  0% {
    opacity: 1;
    transform: translateX(0) scale(1);
    background-color: transparent;
  }
  50% {
    opacity: 0.7;
    transform: translateX(-10px) scale(0.98);
    background-color: rgba(239, 68, 68, 0.1);
  }
  100% {
    opacity: 0.3;
    transform: translateX(-20px) scale(0.95);
    background-color: rgba(239, 68, 68, 0.2);
  }
}

@keyframes delete-mobile {
  0% {
    opacity: 1;
    transform: translateY(0) scale(1);
    background-color: transparent;
  }
  50% {
    opacity: 0.7;
    transform: translateY(-5px) scale(0.98);
    background-color: rgba(239, 68, 68, 0.1);
  }
  100% {
    opacity: 0.3;
    transform: translateY(-10px) scale(0.95);
    background-color: rgba(239, 68, 68, 0.2);
  }
}

@keyframes pulse-delete {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4);
  }
  50% {
    box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
  }
}

.animate-delete-row {
  animation: delete-row 0.8s ease-in-out infinite alternate, pulse-delete 1.5s ease-in-out infinite;
}

.animate-delete-mobile {
  animation: delete-mobile 0.8s ease-in-out infinite alternate, pulse-delete 1.5s ease-in-out infinite;
}

/* Enhanced toast animations */
.toast-success {
  animation: toast-slide-in 0.3s ease-out, toast-bounce 0.6s ease-out 0.3s;
}

.toast-error {
  animation: toast-slide-in 0.3s ease-out, toast-shake 0.5s ease-out 0.3s;
}

@keyframes toast-slide-in {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.9);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes toast-bounce {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-5px);
  }
  60% {
    transform: translateY(-3px);
  }
}

@keyframes toast-shake {
  0%, 100% {
    transform: translateX(0);
  }
  10%, 30%, 50%, 70%, 90% {
    transform: translateX(-2px);
  }
  20%, 40%, 60%, 80% {
    transform: translateX(2px);
  }
}
.compact-view .stat-card {
  @apply p-4;
}

.compact-view .nav-link {
  @apply py-2;
}

.compact-view .glass-card {
  @apply p-4;
}

.compact-view .table-row-hover td {
  @apply py-2;
}

.compact-view h1 {
  @apply text-2xl;
}

.compact-view h2 {
  @apply text-xl;
}

.compact-view h3 {
  @apply text-lg;
}

.compact-view .space-y-6 > * + * {
  margin-top: 1rem !important;
}

.compact-view .space-y-4 > * + * {
  margin-top: 0.75rem !important;
}

/* Mobile Responsive Improvements */
@media (max-width: 640px) {
  .glass-card {
    @apply p-3;
  }
  
  .stat-card {
    @apply p-4;
  }
  
  .space-y-6 > * + * {
    margin-top: 1rem !important;
  }
  
  .space-y-4 > * + * {
    margin-top: 0.75rem !important;
  }
  
  /* Ensure buttons don't overflow */
  .btn-accent, .btn-primary {
    @apply text-sm px-3 py-2;
  }
  
  /* Better mobile grid spacing */
  .grid {
    @apply gap-2;
  }
  
  /* Mobile card improvements */
  .mobile-card-actions {
    @apply flex gap-2 flex-wrap;
  }
  
  .mobile-card-actions .btn {
    @apply flex-1 min-w-[70px] text-xs;
  }
}

/* Tablet responsive improvements */
@media (min-width: 641px) and (max-width: 1024px) {
  .stat-card {
    @apply p-5;
  }
  
  .glass-card {
    @apply p-5;
  }
}
/* Prevent form fields from being disabled */
.project-form-modal input[type="text"],
.project-form-modal input[type="number"],
.project-form-modal input[type="date"],
.project-form-modal textarea {
  pointer-events: auto !important;
  opacity: 1 !important;
  background-color: white !important;
}

.project-form-modal input[type="text"]:disabled,
.project-form-modal input[type="number"]:disabled,
.project-form-modal input[type="date"]:disabled,
.project-form-modal textarea:disabled {
  pointer-events: auto !important;
  opacity: 1 !important;
  background-color: white !important;
  color: inherit !important;
}

.project-form-modal input[type="text"][readonly],
.project-form-modal input[type="number"][readonly],
.project-form-modal input[type="date"][readonly],
.project-form-modal textarea[readonly] {
  pointer-events: auto !important;
  opacity: 1 !important;
  background-color: white !important;
  color: inherit !important;
}

/* Force enable all form fields */
.project-form-modal input,
.project-form-modal textarea,
.project-form-modal select {
  pointer-events: auto !important;
  opacity: 1 !important;
  background-color: white !important;
}

/* Override any disabled styling */
.project-form-modal *[disabled] {
  pointer-events: auto !important;
  opacity: 1 !important;
  background-color: white !important;
  color: inherit !important;
}

/* Color picker improvements - Prevent closing issues */
input[type="color"] {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background: none;
  border: 1px solid hsl(var(--border));
  cursor: pointer;
  border-radius: 0.375rem;
  position: relative;
  z-index: 1000;
}

input[type="color"]::-webkit-color-swatch-wrapper {
  padding: 0;
  border: none;
  border-radius: 0.375rem;
}

input[type="color"]::-webkit-color-swatch {
  border: none;
  border-radius: 0.375rem;
}

input[type="color"]::-moz-color-swatch {
  border: none;
  border-radius: 0.375rem;
}

input[type="color"]:focus {
  outline: 2px solid hsl(var(--ring));
  outline-offset: 2px;
  z-index: 1001;
}

/* Prevent color picker from being interfered with */
input[type="color"]:focus,
input[type="color"]:active {
  pointer-events: auto !important;
  z-index: 9999 !important;
}

/* Ensure color picker dialog stays on top */
input[type="color"]::-webkit-color-swatch-wrapper {
  z-index: 1002;
}

/* Fix for color picker in modal/dialog contexts */
.color-picker-container {
  position: relative;
  z-index: 1000;
  isolation: isolate;
}

.color-picker-container input[type="color"] {
  position: relative;
  z-index: 1001;
  pointer-events: auto !important;
}

/* Additional fixes to prevent closing */
input[type="color"]:active,
input[type="color"]:focus-visible,
input[type="color"]:focus-within {
  z-index: 99999 !important;
  isolation: isolate;
}

/* Prevent modal/dialog interference */
.color-picker-container:focus-within {
  z-index: 99999;
  isolation: isolate;
}

/* Override any modal z-index issues */
[role="dialog"] .color-picker-container input[type="color"]:focus,
[role="dialog"] .color-picker-container input[type="color"]:active {
  z-index: 999999 !important;
}